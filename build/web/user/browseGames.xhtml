<ui:composition template = "/WEB-INF/template/userTemplate.xhtml"
                xmlns = "http://www.w3.org/1999/xhtml"
                xmlns:ui = "http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name = "content" >
        <f:metadata>
            <f:viewAction action ="#{loginCtrl.onUserIndex()}" />
        </f:metadata>
        <h:form>
            <h3>#{msg.selectCategory}</h3>
            <h:selectOneMenu value ="#{accountCtrl.categoryId}">
                <f:selectItems value ="#{accountCtrl.gamesMap}" />
            </h:selectOneMenu>
            <h:commandButton action ="#{accountCtrl.findCategory()}" value ="#{msg.findGames}"/>

            <ul>
                <ui:repeat var = "game" value = "#{accountCtrl.category.games}">
                    <li>
                        <h:commandLink action ="#{accountCtrl.selectedGame(game.gameId, accountCtrl.category.categoryId)}"
                                       value ="#{game.title}" />
                    </li>
                </ui:repeat>
            </ul>
            
            <div>
                <h:commandButton action = "#{accountCtrl.back()}" value ="#{msg.goBack}" />
                <h:commandButton action = "#{loginCtrl.logout()}" value="#{msg.logOut}" />
            </div>
        </h:form>
    </ui:define>
</ui:composition>
